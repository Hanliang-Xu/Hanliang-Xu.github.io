{"ast":null,"code":"import React,{useState}from'react';import{Box,Button,Typography}from'@mui/material';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function JSONUpload(){const[majorErrorReport,setMajorErrorReport]=useState(null);const[errorReport,setErrorReport]=useState(null);const[warningReport,setWarningReport]=useState(null);const[report,setReport]=useState(null);const[uploadError,setUploadError]=useState(null);const handleFileUpload=async event=>{const file=event.target.files[0];const formData=new FormData();formData.append('json-file',file);try{const response=await fetch('/.netlify/functions/upload',{method:'POST',body:formData});if(!response.ok){const errorText=await response.text();throw new Error(\"Server error: \".concat(response.status,\" - \").concat(errorText));}const result=await response.json();setMajorErrorReport(Object.keys(result.major_errors).length?result.major_errors:null);setErrorReport(Object.keys(result.errors).length?result.errors:null);setWarningReport(Object.keys(result.warnings).length?result.warnings:null);setReport(result.report||null);setUploadError(null);}catch(error){console.error('Error:',error);setUploadError(error.message);}};const handleDownloadReport=type=>{window.location.href=\"/.netlify/functions/download?type=\".concat(type);};return/*#__PURE__*/_jsxs(Box,{my:4,sx:{width:'80%',margin:'0 auto',padding:'20px',border:'1px solid #ccc',borderRadius:'8px',backgroundColor:'#f9f9f9',marginTop:'40px'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",gutterBottom:true,children:\"Select a JSON file to validate\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",onChange:handleFileUpload,accept:\".json\",style:{margin:'20px 0'}}),uploadError&&/*#__PURE__*/_jsxs(Box,{mt:2,sx:{color:'red'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",children:\"Upload Error:\"}),/*#__PURE__*/_jsx(\"pre\",{children:uploadError})]}),majorErrorReport&&/*#__PURE__*/_jsxs(Box,{mt:2,sx:{border:'1px solid darkred',padding:'10px',borderRadius:'8px',backgroundColor:'#ffe6e6'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",sx:{color:'darkred'},children:\"Major Error Report:\"}),/*#__PURE__*/_jsx(\"pre\",{children:JSON.stringify(majorErrorReport,null,2)}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"error\",onClick:()=>handleDownloadReport('major_errors'),children:\"Download Major Error Report\"})]}),errorReport&&/*#__PURE__*/_jsxs(Box,{mt:2,sx:{border:'1px solid red',padding:'10px',borderRadius:'8px',backgroundColor:'#ffe6e6'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",sx:{color:'red'},children:\"Error Report:\"}),/*#__PURE__*/_jsx(\"pre\",{children:JSON.stringify(errorReport,null,2)}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"error\",onClick:()=>handleDownloadReport('errors'),children:\"Download Error Report\"})]}),!majorErrorReport&&warningReport&&/*#__PURE__*/_jsxs(Box,{mt:2,sx:{border:'1px solid orange',padding:'10px',borderRadius:'8px',backgroundColor:'#fff4e6'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",sx:{color:'orange'},children:\"Warning Report:\"}),/*#__PURE__*/_jsx(\"pre\",{children:JSON.stringify(warningReport,null,2)}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"warning\",onClick:()=>handleDownloadReport('warnings'),children:\"Download Warning Report\"})]}),report&&/*#__PURE__*/_jsxs(Box,{mt:2,sx:{border:'1px solid blue',padding:'10px',borderRadius:'8px',backgroundColor:'#e6f7ff'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",sx:{color:'blue'},children:\"Generated Report:\"}),/*#__PURE__*/_jsx(\"pre\",{children:report}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",onClick:()=>handleDownloadReport('report'),children:\"Download Generated Report\"})]})]});}export default JSONUpload;","map":{"version":3,"names":["React","useState","Box","Button","Typography","jsx","_jsx","jsxs","_jsxs","JSONUpload","majorErrorReport","setMajorErrorReport","errorReport","setErrorReport","warningReport","setWarningReport","report","setReport","uploadError","setUploadError","handleFileUpload","event","file","target","files","formData","FormData","append","response","fetch","method","body","ok","errorText","text","Error","concat","status","result","json","Object","keys","major_errors","length","errors","warnings","error","console","message","handleDownloadReport","type","window","location","href","my","sx","width","margin","padding","border","borderRadius","backgroundColor","marginTop","children","variant","gutterBottom","onChange","accept","style","mt","color","JSON","stringify","onClick"],"sources":["/Users/leonslaptop/Desktop/GSoC/Hanliang-Xu.github.io/src/pages/JSONUpload.js"],"sourcesContent":["import React, {useState} from 'react';\nimport {Box, Button, Typography} from '@mui/material';\n\nfunction JSONUpload() {\n    const [majorErrorReport, setMajorErrorReport] = useState(null);\n    const [errorReport, setErrorReport] = useState(null);\n    const [warningReport, setWarningReport] = useState(null);\n    const [report, setReport] = useState(null);\n    const [uploadError, setUploadError] = useState(null);\n\n    const handleFileUpload = async (event) => {\n        const file = event.target.files[0];\n        const formData = new FormData();\n        formData.append('json-file', file);\n\n        try {\n            const response = await fetch('/.netlify/functions/upload', {\n                method: 'POST',\n                body: formData\n            });\n\n            if (!response.ok) {\n                const errorText = await response.text();\n                throw new Error(`Server error: ${response.status} - ${errorText}`);\n            }\n\n            const result = await response.json();\n            setMajorErrorReport(Object.keys(result.major_errors).length ? result.major_errors : null);\n            setErrorReport(Object.keys(result.errors).length ? result.errors : null);\n            setWarningReport(Object.keys(result.warnings).length ? result.warnings : null);\n            setReport(result.report || null);\n            setUploadError(null);\n        } catch (error) {\n            console.error('Error:', error);\n            setUploadError(error.message);\n        }\n    };\n\n    const handleDownloadReport = (type) => {\n        window.location.href = `/.netlify/functions/download?type=${type}`;\n    };\n\n    return (\n        <Box\n            my={4}\n            sx={{\n                width: '80%',\n                margin: '0 auto',\n                padding: '20px',\n                border: '1px solid #ccc',\n                borderRadius: '8px',\n                backgroundColor: '#f9f9f9',\n                marginTop: '40px'\n            }}\n        >\n            <Typography variant=\"h4\" gutterBottom>\n                Select a JSON file to validate\n            </Typography>\n            <input\n                type=\"file\"\n                onChange={handleFileUpload}\n                accept=\".json\"\n                style={{margin: '20px 0'}}\n            />\n            {uploadError && (\n                <Box mt={2} sx={{color: 'red'}}>\n                    <Typography variant=\"h6\">Upload Error:</Typography>\n                    <pre>{uploadError}</pre>\n                </Box>\n            )}\n            {majorErrorReport && (\n                <Box mt={2} sx={{\n                    border: '1px solid darkred',\n                    padding: '10px',\n                    borderRadius: '8px',\n                    backgroundColor: '#ffe6e6'\n                }}>\n                    <Typography variant=\"h6\" sx={{color: 'darkred'}}>Major Error\n                        Report:</Typography>\n                    <pre>{JSON.stringify(majorErrorReport, null, 2)}</pre>\n                    <Button variant=\"contained\" color=\"error\"\n                            onClick={() => handleDownloadReport('major_errors')}>\n                        Download Major Error Report\n                    </Button>\n                </Box>\n            )}\n            {errorReport && (\n                <Box mt={2} sx={{\n                    border: '1px solid red',\n                    padding: '10px',\n                    borderRadius: '8px',\n                    backgroundColor: '#ffe6e6'\n                }}>\n                    <Typography variant=\"h6\" sx={{color: 'red'}}>Error Report:</Typography>\n                    <pre>{JSON.stringify(errorReport, null, 2)}</pre>\n                    <Button variant=\"contained\" color=\"error\"\n                            onClick={() => handleDownloadReport('errors')}>\n                        Download Error Report\n                    </Button>\n                </Box>\n            )}\n            {!majorErrorReport && warningReport && (\n                <Box mt={2} sx={{\n                    border: '1px solid orange',\n                    padding: '10px',\n                    borderRadius: '8px',\n                    backgroundColor: '#fff4e6'\n                }}>\n                    <Typography variant=\"h6\" sx={{color: 'orange'}}>Warning Report:</Typography>\n                    <pre>{JSON.stringify(warningReport, null, 2)}</pre>\n                    <Button variant=\"contained\" color=\"warning\"\n                            onClick={() => handleDownloadReport('warnings')}>\n                        Download Warning Report\n                    </Button>\n                </Box>\n            )}\n            {report && (\n                <Box mt={2} sx={{\n                    border: '1px solid blue',\n                    padding: '10px',\n                    borderRadius: '8px',\n                    backgroundColor: '#e6f7ff'\n                }}>\n                    <Typography variant=\"h6\" sx={{color: 'blue'}}>Generated Report:</Typography>\n                    <pre>{report}</pre>\n                    <Button variant=\"contained\" color=\"primary\"\n                            onClick={() => handleDownloadReport('report')}>\n                        Download Generated Report\n                    </Button>\n                </Box>\n            )}\n        </Box>\n    );\n}\n\nexport default JSONUpload;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}